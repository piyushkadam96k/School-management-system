<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>School System</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
</head>
<body>
<div class="box">
    <div class="d-flex justify-content-between align-items-center mb-3">
        <div>
            <a href="/" class="btn btn-outline-primary btn-sm me-2">Dashboard</a>
            <a href="/classes" class="btn btn-outline-secondary btn-sm me-2">Classes</a>
            <a href="/fees" class="btn btn-outline-secondary btn-sm me-2">Fees</a>
        </div>
        <div class="d-flex align-items-center">
            <form class="d-flex me-3" method="get" action="/search">
                <input name="q" class="form-control form-control-sm me-2" placeholder="Search student or roll" required>
                <button class="btn btn-sm btn-primary">Search</button>
            </form>
            {% if g.user %}
                <span class="me-2">
                    {{ g.user['username'] }}
                    <span class="badge bg-info role-badge">{{ g.user['role'] }}</span>
                </span>
                <a href="/logout" class="btn btn-sm btn-outline-danger">Logout</a>
            {% else %}
                <a href="/login" class="btn btn-sm btn-outline-success">Login</a>
            {% endif %}
        </div>
    </div>
    <hr>
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        {% for cat, msg in messages %}
          <div class="alert alert-{{ 'success' if cat=='s' else 'danger' }} alert-dismissible fade show">
            {{ msg }}
            <button class="btn-close" data-bs-dismiss="alert"></button>
          </div>
        {% endfor %}
      {% endif %}
    {% endwith %}
    {{ content|safe }}
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
